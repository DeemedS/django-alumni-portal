{% extends "user_page_layout.html" %}
{% load static %}
{% load csp %}

{% block title %}
    Alumni Portal | User Dashboard
{% endblock %}


{% block content %}

    {% include "components/top_nav.html" %}

    <div class="container-fluid">
        <div class="row flex-nowrap">
            {% include "components/sidebar.html" %}
            <div class="col mb-3">
                <div class="user-header mt-3">
                    <h3>Change Password</h3>
                </div>
                <div class="p-3 bg-light">

                <!-- Redesigned Change Password Form -->
                <div class="container mt-3 mb-5">
                <div class="row justify-content-center">
                    <div class="col-md-6">
                    <div class="card shadow-sm border-0 rounded-4 p-4">
                        <form id="changePassForm" class="userForm" method="post">
                        {% csrf_token %}

                        <!-- Current Password -->
                        <div class="form-floating mb-3 position-relative">
                            <input type="password" class="form-control" id="current_password" name="current_password" placeholder="Current Password">
                            <label for="current_password">Current Password</label>
                            <i class="fa-solid fa-eye toggle-password position-absolute top-50 end-0 translate-middle-y me-3 cursor-pointer"
                            data-target="current_password"></i>
                        </div>

                        <!-- New Password -->
                        <div class="form-floating mb-3 position-relative">
                            <input type="password" class="form-control" id="new_password" name="new_password" placeholder="New Password">
                            <label for="new_password">New Password</label>
                            <i class="fa-solid fa-eye toggle-password position-absolute top-50 end-0 translate-middle-y me-3 cursor-pointer"
                            data-target="new_password"></i>
                        </div>

                        <!-- Confirm New Password -->
                        <div class="form-floating mb-4 position-relative">
                            <input type="password" class="form-control" id="confirm_new_password" name="confirm_new_password" placeholder="Confirm New Password">
                            <label for="confirm_new_password">Confirm New Password</label>
                            <i class="fa-solid fa-eye toggle-password position-absolute top-50 end-0 translate-middle-y me-3 cursor-pointer"
                            data-target="confirm_new_password"></i>
                        </div>

                        <!-- Submit -->
                        <div class="d-grid">
                            <button id="form-submit" type="submit" class="submit-btn">
                            <span id="btn-spinner" class="spinner-border spinner-border-sm d-none me-2" role="status" aria-hidden="true"></span>
                            Save Password
                            </button>
                        </div>
                        </form>
                    </div>
                    </div>
                </div>
                </div>
    
                </div>       
            </div>
        </div>
        
    </div>


<div id="toast-container" class="toast-container position-fixed bottom-0 end-0 p-3">
<!-- Toast template will be added dynamically -->
</div>




<script nonce="{{ request.csp_nonce }}" src="{% static 'js/toast.js' %}"></script>
<script nonce="{{ request.csp_nonce }}" src="{% static 'js/onerror-img.js' %}"></script>
<script nonce="{{ request.csp_nonce }}" src="{% static 'js/show_password.js' %}"></script>
<script nonce="{{ request.csp_nonce }}" src="{% static 'js/handle_change_pass.js' %}"></script>

{% endblock %}

